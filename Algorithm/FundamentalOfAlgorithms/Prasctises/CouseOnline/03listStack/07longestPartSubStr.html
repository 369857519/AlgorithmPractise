<script type="text/javascript">
	var str="(()())";
	function longest(str){
		var currenCount=0,subLength=0,max=0,i=0,stk=[],subLength,j=0;
		for(i=0;i<str.length;i++){
			if(str[i]=="("){
				stk.push(str[i])
			}else{
				stk.pop();
				//每一次pop完之后，记录栈的长度，如果长度没有增加，则链没有断
				if(stk.length<=subLength){
					currenCount+=2;
				}else{
					currenCount=2;
				}
				subLength=stk.length;
			}
			if(max<currenCount){
				max=currenCount;
			}
		}
		return max;
	}
	console.log(longest(str));
	function longest2(str){
		var start=-1,answer=0,deep=0,i=0;
		//右括号比左括号多
		for(i=0;i<str.length;i++){
			if(str[i]=="("){
				deep++;
			}else{
				deep--;
				if(deep==0){
					answer=Math.max(answer,i-start);
				}else if(deep<0){
					start=i;
					deep=0;
				}
			}
		}
		start=length;
		deep=0;
		//左括号比右括号多
		for(i=length-1;i>=0;i--){
			if(str[i]==")"){
				deep++;
			}else{
				deep--;
				if(deep==0){
					answer=Math.max(answer,start-i);
				}else if(deep<0){
					start=i;
					deep=0;
				}
			}
		}
		return answer;
	}
	console.log(longest2(str));
</script>