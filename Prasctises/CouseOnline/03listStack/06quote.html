<script type="text/javascript">
	var str="(({[]}))";
	var str1="(())((";
	function isLegal(str){
		var arr=[],i=0,left="([{",right=")]}";
		for(i=0;i<str.length;i++){
			if(left.indexOf(str[i])<0){
				if(arr.length==0||right.indexOf(str[i])!=left.indexOf(arr[arr.length-1])){
					return false;
				}else{
					arr.pop();
				}
			}else{
				arr.push(str[i]);
			}
		}
		return arr.length==0;
	}
	console.log(isLegal(str));
	console.log(isLegal(str1));
</script>